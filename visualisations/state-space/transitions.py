# import
import networkx as nx
import matplotlib.pyplot as plt
from pyvis.network import Network
import math
from tarjan_algo import *

G = nx.MultiDiGraph()

edges = [ ('103171', '103235'), ('103235', '103171'), ('110723', '111233'), ('110723', '111237'), ('110727', '111237'), ('111111', '45575'), ('111233', '111237'), ('111235', '111237'), ('111237', '111239'), ('111239', '111111'), ('111239', '45703'), ('12035', '75523'), ('12035', '77571'), ('123011', '110723'), ('123011', '110727'), ('123011', '111235'), ('123011', '111237'), ('123011', '123027'), ('123011', '123043'), ('123011', '127107'), ('123027', '110723'), ('123027', '111237'), ('123027', '123011'), ('123027', '127107'), ('123027', '127123'), ('123027', '57491'), ('123027', '61587'), ('123043', '123011'), ('127107', '111233'), ('127107', '111235'), ('127107', '123011'), ('127107', '127619'), ('127107', '61571'), ('127123', '61587'), ('127619', '111233'), ('12807', '15879'), ('12935', '15879'), ('12935', '16007'), ('13959', '16007'), ('14087', '16135'), ('14983', '15879'), ('14983', '16007'), ('15879', '15911'), ('15907', '16163'), ('15907', '7715'), ('15911', '15907'), ('15911', '16163'), ('15911', '16167'), ('15911', '7719'), ('15911', '7971'), ('15911', '7975'), ('16007', '15879'), ('16007', '15911'), ('16007', '16039'), ('16039', '15911'), ('16131', '16163'), ('16135', '16167'), ('16163', '7971'), ('16167', '7971'), ('16167', '7975'), ('1795', '3843'), ('1795', '67331'), ('1795', '75523'), ('1795', '9987'), ('3843', '12035'), ('3843', '1795'), ('3843', '67331'), ('3843', '69379'), ('3843', '75523'), ('3843', '77571'), ('3843', '7939'), ('3843', '7971'), ('45575', '12807'), ('45575', '14087'), ('45697', '45703'), ('45699', '45697'), ('45699', '45701'), ('45699', '45703'), ('45701', '111239'), ('45701', '45703'), ('45703', '111239'), ('45703', '12807'), ('45703', '12935'), ('45703', '13959'), ('45703', '14983'), ('45703', '16007'), ('45703', '45575'), ('57475', '123011'), ('57475', '123027'), ('57475', '61571'), ('57491', '123027'), ('57491', '127107'), ('57491', '57475'), ('57491', '61571'), ('57491', '61587'), ('61571', '111233'), ('61571', '123011'), ('61571', '127107'), ('61571', '45699'), ('61571', '57475'), ('61571', '62083'), ('61587', '57491'), ('61587', '61571'), ('62083', '45699'), ('67331', '1795'), ('67331', '75523'), ('69379', '75523'), ('75523', '1795'), ('75523', '67331'), ('75523', '9987'), ('7715', '7971'), ('7719', '15911'), ('7719', '7715'), ('7719', '7971'), ('7719', '7975'), ('77571', '75523'), ('7939', '16131'), ('7939', '3843'), ('7939', '7971'), ('7971', '7939'), ('7975', '7939'), ('7975', '7971'), ('9987', '1795'), ('9987', '3843'), ]
edge_widths = [ 5.57064, 5.5845, 0.2, 0.2, 0.2, 0.2, 1.80944, 0.2, 2.50259, 0.2, 2.50259, 0.893147, 1.80944, 0.2, 0.2, 0.2, 0.2, 3.14444, 4.99579, 0.893147, 0.2, 0.2, 1.58629, 1.29861, 0.2, 2.83906, 1.58629, 4.98749, 1.29861, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.893147, 0.893147, 2.39722, 0.2, 0.2, 0.2, 0.893147, 2.90805, 0.2, 0.893147, 1.29861, 0.893147, 0.2, 2.68491, 0.2, 0.2, 2.5979, 0.893147, 0.893147, 0.893147, 0.2, 0.2, 1.29861, 0.2, 0.2, 1.80944, 2.5979, 0.2, 0.2, 2.14591, 2.27944, 0.2, 0.2, 1.58629, 0.2, 1.29861, 0.893147, 0.2, 0.2, 0.2, 0.2, 0.2, 2.50259, 0.2, 0.2, 0.2, 0.893147, 2.50259, 0.2, 1.29861, 1.99176, 0.2, 1.58629, 0.2, 0.2, 0.2, 0.2, 0.2, 0.893147, 2.50259, 0.2, 0.2, 0.2, 0.2, 1.80944, 2.50259, 0.2, 2.83906, 2.50259, 1.99176, 3.88888, 0.2, 0.893147, 3.69651, 0.893147, 1.58629, 0.2, 1.29861, 1.29861, 1.99176, 1.99176, 0.2, 3.19573, 3.14444, 3.83759, 0.2, 2.14591, 0.893147, 0.2, ]
nodes = [ '1795', '3843', '7715', '7719', '7939', '7971', '7975', '9987', '12035', '12807', '12935', '13959', '14087', '14983', '15879', '15907', '15911', '16007', '16039', '16131', '16135', '16163', '16167', '45575', '45697', '45699', '45701', '45703', '57475', '57491', '61571', '61587', '62083', '67331', '69379', '75523', '77571', '103171', '103235', '110723', '110727', '111111', '111233', '111235', '111237', '111239', '123011', '123027', '123043', '127107', '127123', '127619', ]
node_sizes = [ 18.8, 21.6, 1.6, 11.2, 69.5, 72.8, 3.2, 0.9, 3.4, 0.4, 2, 0.1, 0.1, 0.5, 8.9, 1.9, 31.2, 12.2, 0.5, 0.7, 0.2, 0.8, 0.3, 0.4, 0.1, 7.2, 0.3, 19.4, 3.7, 10.4, 20.8, 9, 5.6, 57.6, 0.2, 691.2, 1.7, 1109.2, 212.3, 0.3, 0.1, 0.3, 0.9, 0.2, 4.1, 6.9, 305.5, 574.2, 102.3, 2.7, 0.1, 0.1, ]

print(len(edges))


# prune_nodes(nodes, node_sizes, edges, edge_widths)




G.add_nodes_from(nodes)

for i in range(len(edges)):
    G.add_edge(edges[i][0], edges[i][1], width = edge_widths[i])


node_d = {}
for i in range(len(nodes)):
    val = math.sqrt(node_sizes[i])
    val = val * 2
    node_d[nodes[i]] = val

nx.set_node_attributes(G, node_d, 'size')

net = Network(directed=True)
net.repulsion()
net.from_nx(G)
net.show('transitions.html')


CellStates(nodes, edges, node_sizes)



# pos = nx.nx_agraph.graphviz_layout(G)
# nx.draw_networkx_nodes(G, pos, node_size = node_sizes)
# nx.draw_networkx_edges(G, pos, edgelist=G.edges(), nodelist=node_sizes) #, width=edge_widths, connectionstyle='arc3, rad = 0.1') #, nodelist=node_sizes)
# nx.draw_networkx_labels(G,pos)
# plt.show()


