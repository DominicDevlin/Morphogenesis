# import
import networkx as nx
import matplotlib.pyplot as plt
from pyvis.network import Network
import math
from tarjan_algo import *

G = nx.MultiDiGraph()


edges = [ ('108116', '108148'), ('108116', '108372'), ('108116', '75348'), ('108148', '108116'), ('108148', '108404'), ('108148', '75348'), ('108148', '75380'), ('108276', '75508'), ('108372', '108116'), ('108372', '108404'), ('108404', '108148'), ('108404', '108372'), ('108404', '75636'), ('124660', '108276'), ('124660', '59124'), ('124660', '75508'), ('124660', '91892'), ('124916', '124660'), ('124916', '59124'), ('124916', '59380'), ('26356', '30452'), ('26356', '91892'), ('26356', '95988'), ('30452', '30708'), ('30452', '95988'), ('30452', '96244'), ('30708', '79860'), ('30708', '96244'), ('59124', '124660'), ('59124', '26356'), ('59124', '30452'), ('59124', '63220'), ('59124', '91892'), ('59380', '59124'), ('63220', '30452'), ('75348', '75476'), ('75348', '77396'), ('75348', '77524'), ('75380', '108116'), ('75380', '108148'), ('75380', '108404'), ('75380', '75348'), ('75380', '75508'), ('75380', '75636'), ('75380', '79476'), ('75392', '75396'), ('75392', '75408'), ('75392', '75412'), ('75392', '75424'), ('75392', '75444'), ('75392', '75456'), ('75392', '75460'), ('75392', '75476'), ('75392', '75508'), ('75392', '77440'), ('75396', '75460'), ('75396', '75476'), ('75396', '75508'), ('75408', '75508'), ('75412', '75476'), ('75412', '75508'), ('75424', '75428'), ('75424', '75444'), ('75424', '75492'), ('75424', '75508'), ('75428', '75508'), ('75444', '75508'), ('75456', '75460'), ('75460', '75476'), ('75460', '75508'), ('75476', '75348'), ('75476', '75508'), ('75476', '77524'), ('75492', '75508'), ('75508', '108148'), ('75508', '75348'), ('75508', '75380'), ('75508', '75476'), ('75508', '75636'), ('75508', '77524'), ('75508', '79604'), ('75508', '91892'), ('75636', '108148'), ('75636', '108404'), ('75636', '75380'), ('75636', '79732'), ('77396', '77524'), ('77440', '75392'), ('77440', '75424'), ('77444', '77440'), ('77472', '77440'), ('77504', '77440'), ('77508', '77440'), ('77508', '77444'), ('77508', '77524'), ('77524', '77396'), ('77524', '77508'), ('77536', '77440'), ('77536', '77472'), ('77540', '77440'), ('77540', '77504'), ('77540', '77508'), ('77540', '77536'), ('79476', '75380'), ('79476', '79732'), ('79604', '75380'), ('79604', '75508'), ('79604', '79476'), ('79604', '79860'), ('79732', '75636'), ('79860', '75636'), ('79860', '79732'), ('91892', '75508'), ('91892', '95988'), ('95988', '79604'), ('95988', '79860'), ('96244', '79860'), ]
edge_widths = [ 0.2, 1.29861, 0.2, 3.29104, 4.05015, 0.2, 0.2, 0.2, 0.893147, 0.2, 0.2, 4.29434, 0.2, 0.2, 1.58629, 0.2, 1.80944, 0.2, 0.2, 1.58629, 0.893147, 0.2, 0.2, 1.99176, 1.58629, 0.2, 0.893147, 1.58629, 1.29861, 1.29861, 1.99176, 1.29861, 0.2, 1.99176, 1.29861, 1.29861, 1.29861, 0.2, 0.2, 4.49046, 0.893147, 0.2, 0.893147, 3.09037, 0.2, 2.50259, 0.893147, 3.03321, 1.80944, 1.29861, 0.2, 2.50259, 4.09182, 2.14591, 3.81092, 1.29861, 2.27944, 0.2, 0.893147, 2.14591, 2.68491, 0.2, 0.893147, 0.2, 1.58629, 0.2, 1.80944, 0.2, 2.68491, 0.2, 1.29861, 4.37439, 2.97259, 0.2, 0.2, 0.2, 4.74329, 1.58629, 0.2, 0.2, 1.80944, 0.893147, 0.2, 3.29104, 1.29861, 0.893147, 1.29861, 4.24305, 0.2, 0.2, 0.893147, 0.893147, 0.2, 0.2, 2.39722, 0.2, 2.97259, 2.14591, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 2.27944, 0.2, 0.893147, 2.39722, 0.2, 2.27944, 1.80944, 0.893147, 1.99176, 0.2, 1.80944, ]
nodes = [ '26356', '30452', '30708', '59124', '59380', '63220', '75348', '75380', '75392', '75396', '75408', '75412', '75424', '75428', '75444', '75456', '75460', '75476', '75492', '75508', '75636', '77396', '77440', '77444', '77472', '77504', '77508', '77524', '77536', '77540', '79476', '79604', '79732', '79860', '91892', '95988', '96244', '108116', '108148', '108276', '108372', '108404', '124660', '124916', ]
node_sizes = [ 0.6, 9, 2.2, 26.9, 1.1, 0.6, 5.5, 148.3, 200.3, 2.2, 0.3, 3.4, 1.4, 0.1, 0.9, 0.1, 2.9, 64.5, 0.1, 235.4, 41.6, 3.1, 2005, 0.1, 0.2, 0.3, 119.8, 317.4, 0.7, 0.3, 0.5, 10.7, 6.3, 9.3, 3.8, 2.9, 0.9, 533.2, 180, 0.7, 1135.9, 306.8, 9.9, 0.5, ]


print(len(edges))


# prune_nodes(nodes, node_sizes, edges, edge_widths)
# prune_edges(edges, edge_widths, 1)




G.add_nodes_from(nodes)

for i in range(len(edges)):
    G.add_edge(edges[i][0], edges[i][1], width = edge_widths[i])


node_d = {}
for i in range(len(nodes)):
    val = math.sqrt(node_sizes[i])
    val = val * 2
    node_d[nodes[i]] = val

nx.set_node_attributes(G, node_d, 'size')

net = Network(directed=True)
net.repulsion()
net.from_nx(G)
net.show('transitions.html')


CellStates(nodes, edges, node_sizes)



# pos = nx.nx_agraph.graphviz_layout(G)
# nx.draw_networkx_nodes(G, pos, node_size = node_sizes)
# nx.draw_networkx_edges(G, pos, edgelist=G.edges(), nodelist=node_sizes) #, width=edge_widths, connectionstyle='arc3, rad = 0.1') #, nodelist=node_sizes)
# nx.draw_networkx_labels(G,pos)
# plt.show()


