# import
import networkx as nx
import matplotlib.pyplot as plt
from pyvis.network import Network
import math
from tarjan_algo import *

G = nx.MultiDiGraph()

edges = [ ('10883', '10891'), ('10883', '76419'), ('10883', '76427'), ('10890', '76426'), ('10891', '76427'), ('14979', '10883'), ('26755', '27267'), ('27267', '10883'), ('27267', '92803'), ('27779', '27267'), ('30851', '31363'), ('31363', '10883'), ('31363', '14979'), ('31363', '27267'), ('31747', '31755'), ('31747', '31819'), ('31747', '31875'), ('31747', '32075'), ('31747', '32091'), ('31747', '64623'), ('31747', '64879'), ('31747', '64892'), ('31747', '64893'), ('31747', '64894'), ('31747', '64895'), ('31747', '97283'), ('31755', '31747'), ('31755', '64623'), ('31755', '64879'), ('31755', '64892'), ('31755', '64895'), ('31755', '97291'), ('31819', '31747'), ('31819', '64892'), ('31875', '26755'), ('31875', '27267'), ('31875', '27779'), ('31875', '30851'), ('31875', '31363'), ('31875', '32387'), ('32075', '64892'), ('32091', '64892'), ('32387', '27267'), ('32387', '31363'), ('64623', '31747'), ('64623', '31755'), ('64623', '64892'), ('64623', '64895'), ('64879', '31747'), ('64879', '31755'), ('64879', '64892'), ('64879', '64893'), ('64879', '64895'), ('64892', '31747'), ('64892', '31755'), ('64892', '64623'), ('64892', '64879'), ('64892', '64893'), ('64892', '64894'), ('64892', '64895'), ('64893', '31747'), ('64893', '31755'), ('64893', '64892'), ('64893', '64895'), ('64894', '64892'), ('64894', '64895'), ('64895', '31747'), ('64895', '31755'), ('64895', '31819'), ('64895', '31823'), ('64895', '64623'), ('64895', '64879'), ('64895', '64892'), ('64895', '64893'), ('76419', '76427'), ('76419', '92803'), ('76419', '92811'), ('76426', '10890'), ('76426', '76427'), ('76427', '76426'), ('76427', '92811'), ('92803', '76419'), ('92803', '92811'), ('92811', '76427'), ('97283', '31747'), ('97283', '97291'), ('97283', '97411'), ('97291', '31755'), ('97291', '97283'), ('97411', '31875'), ]
edge_widths = [ 0.893147, 3.9612, 0.2, 0.2, 0.893147, 2.39722, 0.2, 3.09037, 0.2, 0.2, 0.2, 3.33549, 2.39722, 3.03321, 2.27944, 0.2, 4.09182, 0.2, 0.2, 1.29861, 1.29861, 4.09182, 0.2, 0.2, 4.81512, 0.2, 1.99176, 0.893147, 0.2, 0.893147, 0.893147, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 3.98419, 1.58629, 0.2, 0.2, 0.2, 1.58629, 0.893147, 0.2, 0.2, 0.893147, 0.893147, 0.2, 0.893147, 0.2, 0.893147, 1.58629, 0.2, 0.2, 0.2, 0.2, 0.2, 5.16981, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 5.20395, 0.893147, 0.2, 0.2, 0.893147, 0.893147, 4.75388, 0.2, 3.63399, 1.99176, 1.58629, 0.2, 0.2, 0.2, 4.09182, 0.2, 1.99176, 3.37805, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, ]
nodes = [ '10883', '10890', '10891', '14979', '26755', '27267', '27779', '30851', '31363', '31747', '31755', '31819', '31823', '31875', '32075', '32091', '32387', '64623', '64879', '64892', '64893', '64894', '64895', '76419', '76426', '76427', '92803', '92811', '97283', '97291', '97411', ]
node_sizes = [ 99.8, 0.1, 1, 1.8, 0.1, 5.7, 0.1, 0.1, 16.7, 997.2, 4.4, 0.2, 0.1, 30.7, 0.1, 0.1, 0.8, 1, 1, 176.2, 0.2, 0.1, 85.9, 46, 0.6, 769.8, 2, 1294.9, 0.4, 6.1, 0.1, ]


print(len(edges))


# prune_nodes(nodes, node_sizes, edges, edge_widths)




G.add_nodes_from(nodes)

for i in range(len(edges)):
    G.add_edge(edges[i][0], edges[i][1], width = edge_widths[i])


node_d = {}
for i in range(len(nodes)):
    val = math.sqrt(node_sizes[i])
    val = val * 2
    node_d[nodes[i]] = val

nx.set_node_attributes(G, node_d, 'size')

net = Network(directed=True)
net.repulsion()
net.from_nx(G)
net.show('transitions.html')


CellStates(nodes, edges, node_sizes)



# pos = nx.nx_agraph.graphviz_layout(G)
# nx.draw_networkx_nodes(G, pos, node_size = node_sizes)
# nx.draw_networkx_edges(G, pos, edgelist=G.edges(), nodelist=node_sizes) #, width=edge_widths, connectionstyle='arc3, rad = 0.1') #, nodelist=node_sizes)
# nx.draw_networkx_labels(G,pos)
# plt.show()


