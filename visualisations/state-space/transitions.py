# import
import networkx as nx
import matplotlib.pyplot as plt
from pyvis.network import Network
import math
from tarjan_algo import *

G = nx.MultiDiGraph()


edges = [ ('19715', '85251'), ('23811', '19715'), ('23811', '23815'), ('23811', '23823'), ('23811', '23843'), ('23811', '23847'), ('23811', '23887'), ('23811', '23919'), ('23811', '32003'), ('23811', '85251'), ('23811', '89347'), ('23811', '97539'), ('23815', '23811'), ('23815', '23919'), ('23823', '23919'), ('23843', '23811'), ('23843', '23919'), ('23847', '23811'), ('23847', '23919'), ('23855', '23811'), ('23887', '23811'), ('23887', '23815'), ('23887', '23919'), ('23919', '23811'), ('23919', '23815'), ('23919', '23843'), ('23919', '23847'), ('23919', '23855'), ('23919', '23887'), ('31747', '97283'), ('32003', '23811'), ('32003', '97539'), ('85251', '93443'), ('89347', '23811'), ('89347', '85251'), ('89347', '93443'), ('89347', '97539'), ('93185', '93187'), ('93185', '93189'), ('93187', '93185'), ('93187', '97283'), ('93189', '93185'), ('93441', '93185'), ('93443', '93185'), ('93443', '93187'), ('93443', '93441'), ('97283', '31747'), ('97283', '93187'), ('97283', '97359'), ('97359', '97283'), ('97539', '23811'), ('97539', '32003'), ('97539', '93187'), ('97539', '93443'), ('97539', '97283'), ]
edge_widths = [ 1.29861, 1.29861, 0.2, 0.2, 1.29861, 0.2, 3.24452, 5.62053, 2.5979, 0.2, 4.31087, 0.2, 0.2, 0.893147, 0.2, 2.68491, 1.29861, 0.893147, 0.2, 0.2, 2.27944, 0.2, 3.19573, 5.66806, 0.2, 2.68491, 0.893147, 0.2, 2.39722, 0.2, 0.2, 2.90805, 2.14591, 1.29861, 1.80944, 1.29861, 4.17029, 4.34313, 0.2, 4.41951, 4.4485, 0.2, 0.2, 1.29861, 3.69651, 0.2, 0.2, 4.87283, 1.29861, 1.29861, 0.2, 1.29861, 1.58629, 3.49584, 3.81092, ]
nodes = [ '19715', '23811', '23815', '23823', '23843', '23847', '23855', '23887', '23919', '31747', '32003', '85251', '89347', '93185', '93187', '93189', '93441', '93443', '97283', '97359', '97539', ]
node_sizes = [ 1.3, 1162.6, 0.5, 0.2, 2.9, 0.4, 0.2, 6, 374.4, 0.2, 14.8, 2.7, 55.6, 1659.9, 2438.2, 1.8, 0.3, 24.4, 608.5, 1.2, 83.8, ]

print(len(edges))


# prune_nodes(nodes, node_sizes, edges, edge_widths)
prune_edges(edges, edge_widths, 0.5)




G.add_nodes_from(nodes)

for i in range(len(edges)):
    G.add_edge(edges[i][0], edges[i][1], width = edge_widths[i])


node_d = {}
for i in range(len(nodes)):
    val = math.sqrt(node_sizes[i])
    val = val * 2
    node_d[nodes[i]] = val

nx.set_node_attributes(G, node_d, 'size')

net = Network(directed=True)
net.repulsion()
net.from_nx(G)
net.show('transitions.html')


CellStates(nodes, edges, node_sizes)



# pos = nx.nx_agraph.graphviz_layout(G)
# nx.draw_networkx_nodes(G, pos, node_size = node_sizes)
# nx.draw_networkx_edges(G, pos, edgelist=G.edges(), nodelist=node_sizes) #, width=edge_widths, connectionstyle='arc3, rad = 0.1') #, nodelist=node_sizes)
# nx.draw_networkx_labels(G,pos)
# plt.show()


