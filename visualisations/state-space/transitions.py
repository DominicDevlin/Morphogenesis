# import
import networkx as nx
import matplotlib.pyplot as plt
from pyvis.network import Network
import math
from tarjan_algo import *

G = nx.MultiDiGraph()

edges = [ ('14223275', '14354351'), ('14288559', '16385967'), ('14354351', '16385967'), ('14354351', '16451503'), ('14354351', '16451567'), ('14485419', '14223275'), ('14485419', '14354351'), ('14485419', '5834667'), ('16385711', '16385775'), ('16385742', '16401934'), ('16385742', '16402126'), ('16385742', '49940174'), ('16385743', '16387791'), ('16385743', '49940175'), ('16385775', '16385743'), ('16385775', '49940175'), ('16385967', '16385711'), ('16385967', '16385775'), ('16385967', '16386031'), ('16386031', '16385775'), ('16386031', '49940175'), ('16386031', '49940207'), ('16386031', '49940431'), ('16386031', '49940463'), ('16387791', '16420559'), ('16387791', '49942223'), ('16401934', '16402126'), ('16402126', '16385742'), ('16420559', '16387791'), ('16451503', '16385967'), ('16451503', '16386031'), ('16451503', '16451567'), ('16451567', '16385967'), ('16451567', '16386031'), ('16451567', '16451503'), ('49940174', '16385742'), ('49940174', '49940175'), ('49940175', '16385743'), ('49940175', '16387791'), ('49940175', '49942223'), ('49940207', '49940175'), ('49940431', '49940175'), ('49940463', '49940175'), ('49940463', '49940207'), ('49940463', '49940431'), ('49942223', '16387791'), ('49942223', '49940175'), ('5834667', '14223275'), ('5834667', '5965743'), ('5899951', '14288559'), ('5900207', '5899951'), ('5965743', '5900207'), ('6096427', '6141483'), ('6096427', '6159915'), ('6096555', '6143531'), ('6096555', '6159915'), ('6096811', '14223275'), ('6096811', '14485419'), ('6096811', '5834667'), ('6096811', '6096427'), ('6096811', '6096555'), ('6096811', '6100523'), ('6096811', '6100907'), ('6096811', '6104619'), ('6096811', '6105003'), ('6096811', '6109099'), ('6096811', '6137387'), ('6096811', '6137771'), ('6096811', '6139435'), ('6096811', '6139819'), ('6096811', '6141483'), ('6096811', '6141867'), ('6096811', '6143531'), ('6096811', '6143915'), ('6096811', '6153771'), ('6096811', '6154155'), ('6096811', '6156203'), ('6096811', '6159915'), ('6096811', '6160299'), ('6100523', '6143915'), ('6100523', '6159915'), ('6100907', '6096811'), ('6100907', '6141867'), ('6100907', '6160043'), ('6100907', '6160299'), ('6104619', '6159915'), ('6105003', '6096811'), ('6105003', '6139819'), ('6105003', '6156203'), ('6105003', '6159915'), ('6105003', '6160299'), ('6109099', '6096811'), ('6109099', '6100907'), ('6109099', '6141867'), ('6109099', '6159915'), ('6109099', '6160299'), ('6137387', '6159915'), ('6137771', '6096811'), ('6137771', '6105003'), ('6137771', '6160299'), ('6139435', '6159915'), ('6139819', '6096811'), ('6139819', '6105003'), ('6139819', '6160299'), ('6141483', '6159915'), ('6141867', '6096811'), ('6141867', '6100907'), ('6141867', '6109099'), ('6141867', '6143915'), ('6141867', '6159915'), ('6141867', '6160299'), ('6143531', '6159915'), ('6143531', '6160299'), ('6143915', '6096811'), ('6143915', '6141867'), ('6143915', '6160299'), ('6153771', '6159915'), ('6154155', '6159915'), ('6156203', '6096811'), ('6156203', '6105003'), ('6156203', '6137771'), ('6156203', '6159915'), ('6156203', '6160299'), ('6159915', '6160299'), ('6160043', '6159915'), ('6160299', '6096811'), ('6160299', '6105003'), ('6160299', '6109099'), ('6160299', '6137771'), ('6160299', '6139819'), ('6160299', '6141867'), ('6160299', '6143915'), ('6160299', '6156203'), ('6160299', '6159915'), ]
edge_widths = [ 3.49584, 0.2, 0.2, 3.5673, 0.2, 3.49584, 0.2, 0.2, 0.2, 0.2, 2.14591, 3.78352, 1.29861, 2.14591, 2.14591, 0.893147, 0.2, 0.2, 1.99176, 2.27944, 0.2, 1.58629, 0.2, 2.83906, 1.80944, 3.33549, 0.2, 2.14591, 1.80944, 1.99176, 2.27944, 2.97259, 0.2, 2.90805, 0.2, 3.78352, 0.893147, 0.893147, 0.2, 3.88888, 2.50259, 1.29861, 2.14591, 1.80944, 1.29861, 3.24452, 3.81092, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 3.37805, 0.2, 0.2, 0.2, 3.5673, 0.2, 3.33549, 0.2, 0.893147, 2.14591, 0.2, 1.29861, 1.29861, 0.2, 0.2, 0.2, 0.2, 0.2, 1.80944, 0.2, 0.2, 0.2, 0.2, 0.893147, 3.4581, 3.78352, 0.2, 0.2, 1.58629, 1.58629, 0.2, 0.2, 0.2, 3.24452, 0.2, 0.2, 0.2, 1.29861, 0.2, 0.2, 0.2, 0.2, 0.893147, 0.2, 1.29861, 0.2, 0.2, 0.2, 3.41888, 1.80944, 0.893147, 0.893147, 1.99176, 0.893147, 0.2, 0.2, 0.893147, 1.58629, 0.2, 0.2, 0.893147, 0.2, 0.893147, 0.2, 0.2, 2.14591, 0.2, 0.2, 0.2, 0.893147, 4.63082, 0.2, 4.05015, 3.03321, 0.2, 1.29861, 3.5673, 1.58629, 1.58629, 2.27944, 3.33549, ]
nodes = [ '5834667', '5899951', '5900207', '5965743', '6096427', '6096555', '6096811', '6100523', '6100907', '6104619', '6105003', '6109099', '6137387', '6137771', '6139435', '6139819', '6141483', '6141867', '6143531', '6143915', '6153771', '6154155', '6156203', '6159915', '6160043', '6160299', '14223275', '14288559', '14354351', '14485419', '16385711', '16385742', '16385743', '16385775', '16385967', '16386031', '16387791', '16401934', '16402126', '16420559', '16451503', '16451567', '49940174', '49940175', '49940207', '49940431', '49940463', '49942223', ]
node_sizes = [ 1.7, 0.2, 0.3, 0.7, 5, 0.2, 704.6, 0.3, 3.3, 0.1, 5.3, 0.7, 0.2, 0.8, 0.1, 6.6, 0.4, 3.2, 0.2, 1, 0.1, 0.1, 2.1, 41.6, 0.1, 138.3, 9.8, 0.1, 23, 22.2, 0.5, 153.3, 6.6, 6, 2.2, 18.6, 61, 0.2, 4.7, 4.5, 13.2, 5, 586.8, 800.7, 2.1, 1.4, 4.7, 144.1, ]

print(len(edges))


# prune_nodes(nodes, node_sizes, edges, edge_widths)
# prune_edges(edges, edge_widths)




G.add_nodes_from(nodes)

for i in range(len(edges)):
    G.add_edge(edges[i][0], edges[i][1], width = edge_widths[i])


node_d = {}
for i in range(len(nodes)):
    val = math.sqrt(node_sizes[i])
    val = val * 2
    node_d[nodes[i]] = val

nx.set_node_attributes(G, node_d, 'size')

net = Network(directed=True)
net.repulsion()
net.from_nx(G)
net.show('transitions.html')


CellStates(nodes, edges, node_sizes)



# pos = nx.nx_agraph.graphviz_layout(G)
# nx.draw_networkx_nodes(G, pos, node_size = node_sizes)
# nx.draw_networkx_edges(G, pos, edgelist=G.edges(), nodelist=node_sizes) #, width=edge_widths, connectionstyle='arc3, rad = 0.1') #, nodelist=node_sizes)
# nx.draw_networkx_labels(G,pos)
# plt.show()


